<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Inicio â€“ Panel Modelo</title>

  <!-- Estilos globales -->
  <link rel="stylesheet" href="../css/main.css" />
  <!-- Estilos locales (asegÃºrate de crearlo o eliminar esta lÃ­nea) -->
  <link rel="stylesheet" href="./model-dashboard-home.css" />
</head>
<body>
  <main class="home-wrap" aria-live="polite">
    <div class="hello">
      <h2>Â¡Hola, <span id="modelName">modelo</span>! ðŸ‘‹</h2>
    </div>
    <p class="sub">Este es tu resumen rÃ¡pido. Desde aquÃ­ puedes ir a transmitir, ver estadÃ­sticas y gestionar tus retiros.</p>

    <!-- KPIs rÃ¡pidos -->
    <section class="cards" aria-label="Resumen">
      <article class="card" aria-label="Ingresos de hoy">
        <h3>Ingresos de hoy</h3>
        <div class="kpi" id="kpiToday">0 USDT</div>
        <div class="muted">Actualiza al finalizar cada live</div>
      </article>

      <article class="card" aria-label="Propinas (ONECOP)">
        <h3>Propinas (ONECOP)</h3>
        <div class="kpi" id="kpiOnecop">0</div>
        <div class="muted">Saldo estimado</div>
      </article>

      <article class="card" aria-label="Retiros pendientes">
        <h3>Retiros pendientes</h3>
        <div class="kpi" id="kpiWithdraw">0 USDT</div>
        <div class="muted">MÃ­nimo de retiro: 5 USDT</div>
      </article>
    </section>

    <!-- Acciones rÃ¡pidas -->
    <section class="quick" aria-label="Accesos rÃ¡pidos">
      <button class="primary" id="goLive">ðŸ”´ Ir a transmitir</button>
      <a href="./model-stats.html">ðŸ“Š Ver estadÃ­sticas</a>
      <a href="./model-withdraw.html">ðŸ’¸ Solicitar retiro</a>
      <a href="./model-referrals.html">ðŸ“£ Mis referidos</a>
    </section>
  </main>

  <script>
    // Rellenar nombre desde login (fallback username || name)
    try {
      const user = JSON.parse(localStorage.getItem('rvl_user') || '{}');
      if (user?.username || user?.name) {
        document.getElementById('modelName').textContent = user.username || user.name;
      }
    } catch {}

    // BotÃ³n "Ir a transmitir"
    document.getElementById('goLive')?.addEventListener('click', () => {
      if (parent && parent.frames && parent.frames['main']) {
        parent.frames['main'].location.href = './model-live-stream.html';
      } else {
        location.href = './model-live-stream.html';
      }
    });

    // KPIs iniciales (puedes reemplazar con datos reales desde API)
    document.getElementById('kpiToday').textContent    = '0 USDT';
    document.getElementById('kpiOnecop').textContent   = '0';
    document.getElementById('kpiWithdraw').textContent = '0 USDT';
  </script>
</body>
</html>
